#!/bin/bash

#1. Disable video forwarding by setting bits [5:4] of the FWD_CTL1 register (i.e. set register 0x20 to 0x30)
i2cset -y 1 0x30 0x20 0x30

#2. Configure CSI-2 Transmitter operating speed using the CSI_PLL_CTL register.
i2cset -y 1 0x30 0x1F 0x00

# 3. Enable the CSI-2 Transmitter for port 0 using the CSI_CTL register
i2cset -y 1 0x30 0x33 0x01


# code example
#Patgen Fixed Colorbar 1280x720p30

i2cset -y 1 0x30 0x33 0x01 # CSI0 enable

i2cset -y 1 0x30 0xB0 0x00 # Indirect Pattern Gen Registers
i2cset -y 1 0x30 0xB1 0x01 # PGEN_CTL
i2cset -y 1 0x30 0xB2 0x01

i2cset -y 1 0x30 0xB1 0x02 # PGEN_CFG
i2cset -y 1 0x30 0xB2 0x33

i2cset -y 1 0x30 0xB1 0x03 # PGEN_CSI_DI
i2cset -y 1 0x30 0xB2 0x24

i2cset -y 1 0x30 0xB1 0x04 # PGEN_LINE_SIZE1
i2cset -y 1 0x30 0xB2 0x0F

i2cset -y 1 0x30 0xB1 0x05 # PGEN_LINE_SIZE0
i2cset -y 1 0x30 0xB2 0x00

i2cset -y 1 0x30 0xB1 0x06 # PGEN_BAR_SIZE1
i2cset -y 1 0x30 0xB2 0x01

i2cset -y 1 0x30 0xB1 0x07 # PGEN_BAR_SIZE0
i2cset -y 1 0x30 0xB2 0xE0

i2cset -y 1 0x30 0xB1 0x08 # PGEN_ACT_LPF1
i2cset -y 1 0x30 0xB2 0x02

i2cset -y 1 0x30 0xB1 0x09 # PGEN_ACT_LPF0
i2cset -y 1 0x30 0xB2 0xD0

i2cset -y 1 0x30 0xB1 0x0A # PGEN_TOT_LPF1
i2cset -y 1 0x30 0xB2 0x04

i2cset -y 1 0x30 0xB1 0x0B # PGEN_TOT_LPF0
i2cset -y 1 0x30 0xB2 0x1A

i2cset -y 1 0x30 0xB1 0x0C # PGEN_LINE_PD1
i2cset -y 1 0x30 0xB2 0x0C

i2cset -y 1 0x30 0xB1 0x0D # PGEN_LINE_PD0
i2cset -y 1 0x30 0xB2 0x67

i2cset -y 1 0x30 0xB1 0x0E # PGEN_VBP
i2cset -y 1 0x30 0xB2 0x21

i2cset -y 1 0x30 0xB1 0x0F # PGEN_VFP
i2cset -y 1 0x30 0xB2 0x0A
