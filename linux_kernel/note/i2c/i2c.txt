i2c 基本知识总结

===============
1.1 I2C总线知识

在物理连接上,由SDA(串行数据线)和SCL(串行时钟线)及上拉电阻组成。

==================
1.1.2  I2C总线特征

(1) 每一个设备对应唯一的地址,主从设备之间通过i2c地址来确定与哪个器件进行通信

(2) I2C总线上可挂接的设备数量受总线的最大电容400pF限制，如果所挂接的是相同
	型号的器件，则还受器件地址位的限制。

(3) I2C总线数据传输速率在标准模式下可达100kbit/s，快速模式下可达400kbit/s，
	高速模式下可达3.4Mbit/s。

(4) 通过I2C总线接口可编程时钟来实现传输速率的调整，同时也跟所接的上拉电阻的阻值有关。
	I2C总线上的主设备与从设备之间以字节(8位)为单位进行双向的数据传输。

==================
1.1.3  I2C总线协议(硬件时序)

空闲状态: SCL和SDA都保持高电平
起始条件: SCL为高电平, SDA由高到低	(空闲到起始)
停止条件: SCL为高电平, SDA由低到高  (恢复到空闲)

-------------
如何传输数据?

传输一个字节:
(1) 主设备在SCL线上每产生一个时钟脉冲，SDA线上传输一个数据位;
(2) 当一个字节按数据位从高位到低位的顺序传输完后，从设备拉低SDA线，回传给主
	设备一个应答位

主设备在传输有效数据之前,要先指定从设备的地址，地址指定的过程和上面数据传
输的过程一样.
只不过大多数从设备的地址是7位的，协议规定再给地址添加一个最低位用来表示接下来数据
传输的方向，0表示主设备向从设备写数据，1表示主设备向从设备读数据。

==================
1.1.4  I2C总线操作

主从设备之间的读写操作
	第一，主设备往从设备中写数据。
	第二，主设备从从设备中读数据。
	第三，主设备往从设备中写数据，然后重启起始条件，紧接着从从设备中读取数据；
		  或主设备从从设备中读数据，然后重启起始条件，紧接着主设备往从设备中写数据。


==================
2.1 I2C 驱动层次划分

                            +-----------------+
                            |    Program      |
user space                  +-------+---------+
 -----------------------------------+-------------------------------------------
kernel space                        |
                                    |
                                    v
              +--------+       +---------+     +---------+
              | Driver +------>| client  |<----+ i2c-dev |
              +----+---+       +----+----+     +----+----+
                   |                |               |
                   |                |               |
                +--+----------------+---------------+--+
                |               i2c-core               |
                +-------+-------------------+----------+
                        |                   |
                        |                   |
                   +----+------+        +---+-----+
                   | Algorithm +------->| adapter |
                   +---------+-+        ++--------+
                             |           |
                             |           |
                          +--+-----------++
                          |    adapter    |
                          | specific code |
                          +---------------+

 ------------------------------------------------------------------------------
hardware                                                                       

                          +---------------+
                          |   adapter     |
                          |   hardware    |
                          +----+-+--------+
                               | |
                               | |
                   -----+------|-+-----------+--------
                ------+-|------+-----------+-|------
                      | |                  | |
                      | |                  | |
                   +--+-+-------+       +--+-+-------+
                   | i2c-device |       | i2c-device |
                   +------------+       +------------+

================================================================================
