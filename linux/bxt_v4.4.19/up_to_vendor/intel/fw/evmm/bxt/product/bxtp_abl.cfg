EVMM_CMPL_FLAGS :=
#EVMM_CMPL_FLAGS += -DDEBUG
#EVMM_CMPL_FLAGS += -DTRUSTY_USE_DEVICE_IO

EVMM_CMPL_FLAGS += -DLOG_LEVEL=2

# EPT_POLICY: always enable UG/EPT
# TSC_FREQ is defined in KHz
EVMM_CMPL_FLAGS += \
 -DMAX_APIC_ID=8 \
 -DENABLE_SECOND_GUEST_DEBUG_BUFFER \
 -DMODULE_ACPI \
 -DLIB_PCI \
 -DLIB_PRINT \
 -DSERIAL_MMIO \
 -DSERIAL_PCI \
 -DSERIAL_PCI_BUS=0 \
 -DSERIAL_PCI_DEV=24 \
 -DSERIAL_PCI_FUN=2 \
 -DMODULE_ACPI_PM \
 -DMODULE_VMCALL \
 -DMODULE_DEADLOOP \
 -DMODULE_LOCAL_APIC \
 -DMODULE_IPC \
 -DMODULE_TRUSTY_GUEST \
 -DMODULE_MSR_ISOLATION \
 -DMAX_ISOLATED_MSR_COUNT=5 \
 -DPRODUCT_BXTP_ABL \
 -DEPT_POLICY=0x80000000 \
 -DSG_CORE_NUM=1 \
 -DTOP_OF_MEM=0x280000000 \
 -DTSC_FREQ=1881600 \
 -DCPU_NUM=4 \
 -DMODULE_VTD \
 -DDMAR_MAX_ENGINE=4 \
 -DSKIP_DMAR0

export LOADER_STAGE0_SUB = abl
